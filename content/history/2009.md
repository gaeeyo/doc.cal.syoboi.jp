---
title: 2009
---


- 2009-12-23
    - progedit.js チェックをダブルクリックして続きのデータを追加するとき、自動入力される時間が「ずれ」を含まない時間になるように修正
    - config サイドバーに表示される「カレンダー」と「最近の更新」のon/off項目を追加
    - callib サイドバーの表示項目に関するcookieの仕様を変更(複数のcookieをまとめて保存するように)
- 2009-12-22
    - iCal\_Parser 終日でないイベントに期限が設定されている場合に正常に処理できない問題を修正
    - view3 icsの終日でないイベントを上部のリストに表示しないように(終日イベントだけ上部、それ以外は番組表の中だけに表示)
    - view3 icsのLOCATIONをチャンネル、DESCRIPTIONをコメントとして表示するように
- 2009-12-21
    - db2 検索時に「ぁぃぅぇぉ」と「あいうえお」の違いや、ひらがなとカタカナの違いを無視するように
- 2009-12-21
    - view3 icsファイルを混ぜて表示する機能を追加
        - ログイン後の設定のスクリプトの項目で「ics=http://...」の形式でURLを書く
        - icsファイルは番組表を開いた時点で取得しにいくため、レスポンスが悪化する
        - 取得したicsファイルは5分間キャッシュ
- 2009-12-17
    - fs 文字をさらに大きくして見た目を少し派手に
- 2009-12-16
    - progedit,progedit2 編集者のUserIDを保存するように
    - titlehistory 履歴一覧で自分が編集したものに「(あなた)」の表示がされるように
    - proghistory 履歴一覧で自分が編集したものに「(あなた)」の表示がされるように
    - titlehistory 差分抽出の実装を Text\_Diff を利用したものに変更
    - tid/ iTunes Storeへのリンクを表示する機能を追加(ただしデータの登録は今のところ管理人しがてきない)
    - config 広告リンクを削除する設定を追加(復活)
    - config 設定保存後、何も表示されないことがある問題を修正
- 2009-12-15
    - usr ユーザIDの重複登録時のエラーメッセージの不具合を修正
    - config,tid\_user,usr,uc フォームのバリデーションの内容を増やした
    - find フォームの見た目を変更。使えない項目を隠すようにした
    - find 放送時間検索のときタイトル、サブタイトル、チャンネル、コメントを別々に指定するようにした
    - find タイトルと放送時間を同時に検索する機能を削除
    - find 放送時間の全文検索にTokyo Cabinetを使うように
- 2009-12-14
    - cal\_chk.php startとdaysのパラメータを追加
    - cal\_chk.php クエリの内容を最適化してレスポンスを改善
    - db ProgInfoのLastUpdateにインデックス追加(これが無いせいで更新順リストの更新にものすごく時間がかかっていた)
- 2009-12-12
    - titleedit 見た目と動作はほぼそのまま、ソースを整理して作り直し
        - エラー発生時の動作を改善
        - タイトルデータ更新時に更新者のIPアドレスではなくUserIDから生成した値を保存するように
        - タイトルデータ更新時にchglog.htmlが無駄に2度更新される不具合を修正
        - タイトルデータのリンクだけを抽出する処理でブラケットで囲まれていないリンクが抽出されない問題を修正
    - common.js 検索窓で検索結果が見つからないときに「見つかりません」と表示するように
    - common.js 検索窓で入力してから検索するまでの遅延を300msから250msにして若干結果が早く表示されるように
    - db2 検索窓から検索したときの検索の処理に Tokyo Cabinet を利用するようにした
        - 不要になったテーブルを削除して、関連していた処理を書き直し
    - rank2 検索機能を削除
    - json 検索窓から検索したとき結果が0件の場合、コメントデータを検索した結果を表示するように
        - キャラの名前とかでも出てくるように
    - cal.cfg アカウントのアクティブ判定の閾値を4日から7日に変更
    - find タイトルをキーワード検索したとき、無関係なタイトルがヒットする問題を修正
    - find タイトル検索でTCを利用するように
- 2009-12-05
    - find ローマ字変換できないキーワードで検索されたとき、読みが登録されていないタイトルがすべてヒットする問題を修正
- 2009-12-04
    - view3 hover時拡張した番組を強調するとき-moz-box-shadowを使うようにした
- 2009-12-04
    - graph 自作のグラフ表示Flashを使うのをやめて Chart APIを使うようにした
    - rank2 グラフを追加して見た目を変更
    - commmon.js ヘッダの検索窓の候補をクリックしたときにリンク先に移動できない問題を修正(したつもり)
    - db2 検索窓で検索したときの処理をいろいろ変更
        - 検索の方法をN-Gramを使った方法に変更(今までLIKE使ってた)
        - インデックスに翻訳したタイトルも含めるようにした
        - 入力された文字列が不完全なローマ字だったとき、かな変換ししないようにした(今まで"air"を"あい"で検索していた)
- 2009-12-03
    - header 検索窓の動作を変更
        - 前後1週間の予定表示をやめて、普通のタイトル検索結果に
    - callib 2009-11-30に追加した処理の関係でfifから番組表が表示できなくなっていた問題を修正
- 2009-11-30
    - index,view,view3 ニコニコ実況へのリンクを追加
        - 放送15分前から15分後までリンクが出てきます
        - リンク先はチャンネルのコメントデータに書かれたURLを使います
- 2009-11-29
    - callib,tid/ キーワードで「wikipedia:なんちゃら」と書くとWikipediaへのリンクとして優先的に使用されるように
- 2009-10-13
    - callib 表示日数が「1」のときは「表示開始位置」を「前日から表示」であっても当日を表示するように
    - header IE7互換モードを指定するように (24モードで表示がずれる問題に対処できなかったため)
- 2009-10-09
    - config 放送時間タブのデフォルトのソート方法の設定を追加
    - config 放送時間タブのチャンネルフィルタの設定を追加(概要タブと共通)
    - config 設定後に前のページに戻るように
    - tid/*/time 設定されたソート方法が適用されるように
    - tid/ タイトルが2重にエスケープされる問題を修正
- 2009-10-08
    - db2 本番環境でテスト版のデータベースが参照されていたのを修正(listに影響)
    - uc 必要なファイルが足りていなくて動作しなかったのを修正
- 2009-10-07
    - config 「文字の大きさ」の設定の選択肢を1つ増やし、表記を変更
    - config 「サイドバー」の項目を削除(トップページで変更できるので)
    - config 表示日数の設定を数値入力からコンボリストに変更
    - config 項目の表示順序を調整
    - config tid/*/time のフィルタのデフォルトを設定可能に
    - tid/*/time 設定されたデフォルトのフィルタが使われるように
    - tid/*/time 初期状態で時間順になるように(今まではチャンネル順)
- 2009-10-06
    - fs 「表示の開始位置」の設定を無視するようにした(常に当日から表示)
    - i 「表示の開始位置」の設定を無視するようにした(常に当日から表示)
    - config 「表示の開始位置」に「当日分を中央に表示」を追加
    - callib view,view2,view3,view4で表示の開始位置が表示日数に応じて切り替わるように修正
    - usr iPhone向け追加
    - list iPhone向け追加
    - tid/*/time プログラム追加時に1週間あたりの回数の設定を追加
- 2009-09-08
    - index 番組表下部の新番組一覧へのリンクの切り替えタイミングを20日前から30日前に変更
- 2009-08-29
    - awslib 画像が無いグッズを登録したときに正常にデータが登録されない問題を修正
- 2009-08-18
    - awslib tid/*/goodsからグッズのデータを登録したときにエラーが発生する問題を修正
- 2009-07-16
    - q 文字コードをCP932に変換するように変更
- 2009-07-14
    - find 「検索キーワードが空」「範囲指定が空」「フラグ指定なし」「Refererなし」のすべての条件を満たしているとき、トップページにリダイレクトするように
- 2009-07-02
    - index 「サイドバー」のテキストクリックによるサイドバー表示の切り替えが表モード以外でも動作するように
    - index,view1,view3,view4,index.js,view3.js 表モード以外のモードでも「#nnn」をクリックしたときにポップアップが表示されるように修正
- 2009-06-30
    - callib タイトル情報に含まれるリンクを抽出してコメントをパースしなくても利用できるようにした
    - view3 タイトルのコメントにChNameと同じ名前のリンクがあったら「視聴」のテキストでリンクするようにした(ただし、ChGIDが7(インターネット)の場合のみ)
- 2009-06-25
    - config はてなスターの設定項目削除
    - \* はてなスターを表示する処理を削除
    - uc PluginScriptの設定を追加
    - p 何も表示されないページを追加
- 2009-06-24
    - index AutoPagerize有効時に番組表の下に表示されるリンク集にアクセスしずらくなる問題に対処
    - callib ログイン時に3時間あたり5回エラーを起こすとアカウントをロックするように修正
- 2009-06-22
    - tid/*/time 削除済みデータがフィルタ一覧に表示されないように修正
    - tid/*/summary IE6でスクリプトエラーが出る問題を修正
    - tid/*/time IEでスクリプトエラーが出る問題を修正
    - view3 IEでスクリプトエラーが出る問題を修正
- 2009-06-14
    - index はてなスター無効時にスクリプトエラーが出る問題を修正
    - tid/*/summary はてなスター無効時にスクリプトエラーが出る問題を修正
    - tid/*/time はてなスター無効時にスクリプトエラーが出る問題を修正
- 2009-06-11
    - index AutoPagerize向けにタグを入れたりclass名を設定
    - view3 はてなスター追加
    - tid/*/summary はてなスター追加
    - tid/*/time はてなスター追加
- 2009-06-10
    - common.js テンプレートのパラメータが無限に展開できるように修正
    - view3.js ポップアップ内のチャンネル名を「/tid/*/time?Filter=ChID」のリンクに
    - view3.js ポップアップ内の日時をその日時の番組表へのリンクに
    - tid/*/time パラメータの「#nnn」の後ろに「s」を付けたら、ハイライトされた部分までスクロールするようにした
- 2009-06-07
    - c\_newrelease ゲスト用のグッズ一覧が4月以降更新されなくなっていた不具合を修正
- 2009-06-05
    - \* Amazonのデータベース更新が4月に止めたまま再開しわすれていたのを修正
    - \* Amazonを署名つきでアクセスするように修正
- 2009-05-25
    - rss titlefmtにConfFlag(ユーザ設定フラグ)を追加
    - rss titlefmtにCat(カテゴリ値)を追加
- 2009-05-04
    - q 日付の変更時にIDが正しく引き継がれない問題を修正
- 2009-04-25
    - index ニューリリースの一覧が番組表より高くならないように(IE6以外の新しめのブラウザのみ対応)
    - rank2 数値部分のフォーマット変更
    - index サイドバー内のテーブルの幅が膨らんでスクロールバーが出る問題に部分的に対処
- 2009-04-23
    - rank2 右の列のランキングで未設定のものだけ * を表示するように
    - db.php ChLookupコマンド追加
    - db.php fmt=csv パラメータでcsvで出力できるように(とりあえずChLookupとTitleLookupのみ対応)
- 2009-04-22
    - tid/*/user 元のページに正常に戻れない問題を修正
    - db.php gzip転送に対応
    - db.php ProgLookupコマンド追加
- 2009-04-21
    - db.php TitleLookupコマンドの出力にLastUpdateを追加
    - db.php TitleLookupコマンドにLastUpdateパラメータを追加
    - db.php TitleLookupコマンドのTIDで複数のTIDを指定できるように
    - db.php TitleLookupコマンドにFieldsパラメータを追加
- 2009-04-20
    - tid/*/summary 「すべて」「設定に従う」を切り替えられるように(切り替えた結果はcookieに保存)
    - config タイトルページのデフォルトのフィルタの設定を削除(tid/*/summary で設定するように)
    - tid/ 関連タイトルがあるときヘッダのタイトルの横にポップアップを追加
    - rank2 設定へのリンク追加
    - rank2 先週のデータとの差分表示を追加
- 2009-04-17
    - chlist チャンネルの編集用のリンクのURLが間違っていたのを修正
- 2009-04-15
    - login\_o livedoor Authで正常にログイン、ID作成ができない問題を修正
    - passwd livedoor Authでログインしているときは、パスワード変更できないという表示を行うようにした(そもそもパスワードが登録されていない)
    - config 文字の大きさの設定を変えたときに、すぐに画面に結果をプレビューできるように
- 2009-04-14
    - titleedit 新規追加したタイトルが TID=0 で登録されてしまい、以降新しいタイトルを追加できない問題を修正(登録されていたタイトルのTIDは1652に変更しました)
    - view1.js 表示日数が多いときの処理の無駄を減らした
    - view1.js 時間更新時にエレメントの位置を再検索しないようにキャッシュして使うように
    - common.js 初期化に時間がかかってしまうのでキーワードのポップアップを停止
    - callib タイトル情報のコメント欄で ［［キーワード］］(括弧は半角) で検索リンクを作れるようにした(今までできなかった「、」を含む名前を書いたり、「:名前:値」以外の場所で人名にリンクをはれるように)
    - view1,view3,view4 番組表からのtid/へのリンクのURLにデフォルトのタブの設定を反映(放送時間タブに設定している場合は tid/*/time へのリンクになる)
    - tid/ サイドバーを常に表示に戻した
    - tid/ フォントサイズを今までより小さく
    - tid/*/time 日付のリンクを復活させた
    - tid/*/time 更新日の表示を短縮形にした
    - tid/*/time フィルタの表示方法を変更。チャンネル名が設定されたチャンネルが先に表示されるように
    - tid/*/time 「設定に従う」のとき設定されているチャンネルがわかるように
    - tid/*/summary ユーザ設定とチャンネルフィルタが適用されるようにした
    - tid/ 「#PID」付きでアクセスしたときのハイライトの色を変更
    - tid/*/user ハイライトの色を変更
    - tid/ 8文字以下の名前は折り返されないように
- 2009-04-13 #3
    - q UserIDの指定が正しく動作しない問題を修正
    - view3 UserIDの指定が動作しない問題を修正(主にfif経由)
- 2009-04-13 #2
    - tid/ ハイライトされた行を中心に自動的にスクロールする機能を停止
    - view3 番組表内の最後の時間の番組が表示されない問題を修正
    - tid/*/time IE8で新規追加できない問題を修正 (編集)
    - tid/*/time 編集と削除ボタンの幅を広げた (編集)
    - db テーブルの使用しなくなったカラムを削除した関係でSQLでエラーが発生していたのを修正
    - commom\_header 24モードがIE8で正常に表示できなかったためIE7モードを指定するようにした
- 2009-04-13
    - \* テーブルの定義で無駄に大きい型が使われていたところを全体的に修正
    - \* UserIDの管理方法を変更
    - tid/ 見た目変更
    - tid/ UserAgentが "mAgicAnime 1.8.*" の場合は2009-04-12までの表示方法で表示するように
    - tid/*/summary 月単位の表示にして、放送が無い日も空白で表示するように
    - tid/*/summary 前後の月に移動できるように
    - tid/*/summary 左側のスタッフの情報を表示している幅を広げた
    - tid/*/summary 「続きを表示」ボタンを追加して、続きを継ぎ足せるように
    - tid/*/summary 似ている番組のスタッフの名前をクリックして検索結果をポップアップに表示するように
    - tid/*/summary 「編集」のリンクを追加して編集画面に直接移動できるように
    - tid/*/time スタッフ等の情報を削除
    - tid/*/time フィルタのUIを変更
    - tid/*/time チェックしたとき行全体をハイライトするように(編集)
    - tid/*/time すべてのカラムでソート可能にした
    - tid/*/time 追加のフォームを大きくした(編集)
    - tid/*/time 追加のフォームで使い勝手がイマイチなテンキー表示を追加(編集)
    - tid/*/time 追加のフォームでユーザ設定のチャンネルがハイライト表示されるように(編集)
    - tid/*/time 追加のフォームで登録時に確認が表示されるように(編集)
    - tid/*/subtitle スタッフ等の情報を削除
    - tid/*/goods スタッフ等の情報を削除
    - tid/*/user スタッフ等の情報を削除
    - tid/*/user ★の設定方法を変更
    - quarter スタッフやキャストの名前をクリックして検索結果をポップアップに表示するように
    - progedit2 フッタの説明部分を現状に合わせて微修正(編集)
    - index 「最近の更新」のリンク先のフィルタを「すべてのチャンネル 最近更新があった」に修正
    - view 24モードの表示速度を改善(約3倍)
    - view3 表モードの表示速度を改善(約2倍)
    - i ロード時に実行されるJavaScriptを減らして枠がクリックされるまで先延ばしにした
    - i ボタンを少し大きく
    - i 「詳細」のリンクを別ウィンドウで開くように
    - c\_util レーティングを週単位で保存する処理を追加
    - c\_util 無効ユーザの判定
    - rank2 週単位で保存したデータを使うようにして高速化(リアルタイムの結果が表示されなくなった)
    - \* 大きめのスクリプトを外部ファイル化
    - \* 外部スクリプトの読み込みをページの最後の部分で行うように
    - cal\_chk.php 文字コードをEUC-JPからUTF-8に変更
- 2009-04-09
    - i 「詳細」をクリックしたときに、間違ったリンク先に飛んでしまう問題を修正
- 2009-04-01 #2
    - quarter 「音響監督」や「プロデューサー」など表示しないようにしていた部分を、すべて表示するように
    - find 表モードの検索結果で番組をポイントしたとき、同じタイトルの番組が複数あるときはハイライトするように
- 2009-04-01
    - js/filter\_browser.js quarterで使っていたフィルタの生成部分を汎用化して最適化して独立
    - quarter filter\_browser.jsを使った処理に修正
    - find 表モードの検索結果にフィルタをかけられるように
    - find 表モードの検索結果でチャンネル名とサブタイトルの表示順序を逆にした
- 2009-03-31
    - htmltotext util/に移動
    - syobocal.js old\_ver/に移動
    - chgroup.js js/に移動
    - index.js js/に移動
    - quarter IEの場合に正常に集計できない問題を修正
    - quarter キャストやスタッフをきちんと区切りで分離してから集計、ハイライトするように
- 2009-03-29
    - quarter 1番組で2回名前が出ると(2)になってしまう問題を修正
    - quarter 選択したテキストがハイライトされるように
    - view3 「新」「終」等のマークを枠の右上ではなく左肩に表示するように変更
    - quarter 複数のフィルタを設定したとき、最後のフィルタだけ適用される不具合を修正
- 2009-03-29
    - quarter iTunes風のフィルタを追加
- 2009-03-24
    - usr ログインフォームにダミーのテキストを追加(日本語のユーザIDのデコードで失敗する問題への対処)
    - uc configとpasswdへのリンクを追加
    - passwd パスワード変更を追加
    - ch,chlist,chedit,chg 新しいヘッダー適用
    - titlelist 互換のために一応残して終了
    - index 設定で「前日から表示」にしているとサイドバーのカレンダーのハイライト部分が表示内容と一致しない不具合を修正
    - q 日本語のIDでフィルタできない不具合を修正
- 2009-03-23
    - callib Blu-rayの判定を修正して、Blu-ray判定されなかったものがされるように
    - find 「チャンネル絞り込み設定を使う」をチェックしたとき、チャンネルフィルタだけでなく、番組ごとの設定も反映されるように
    - find 表モードの出力を激しく修正。番組表の表モードに近い表示に
    - \* "ie8"パラメータを削除して、常にIE=8を指定するように
    - view3 IE7やIE8でものすごくブラウザの負荷が高まる問題を修正
- 2009-03-20
    - \* "ie8"パラメータをあったらIE8モードを指定するように(指定してないときはIE7モード)
- 2009-02-08
    - robots.txt /?date= を追加。番組表の日付指定付きのリクエストを拒否した
    - robots.txt /tid*? フィルタした結果がインデックスされないようにした
- 2009-02-07
    - robots.txt タイプミスでlocalcalconfigを不許可にできていなかったのを修正
    - index クッキーを設定するだけのlocalcalconfigへのリンクをrel=nofollowにした(毎日無駄に6～8万回アクセスがあった)
- 2009-01-30
    - fs IE6でアクセスしたときに、エラーメッセージを表示するように
- 2009-01-29
    - view3.js ポップアップの話数切り替えのリンクをクリックすると、ページの一番上にスクロールしてしまう不具合を修正
- 2009-01-27
    - header2 ブラウザがIE8のとき、IE7モードで表示するようにした(IE8モードでのパフォーマンスが悪すぎるため)
    - goods デザイン変更(レイアウト変更、アイコン追加、移動用のリンク追加等)
